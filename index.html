<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>PsyduckAnime - best place to watch pokemon subbed and dubbed</title>
    <meta property="og:title" content="Psyduckanime - watch pokemon for free"/>
    <meta property="og:image" content="https://m.media-amazon.com/images/M/MV5BMGNjMmFlYWUtMTBjNS00YzdlLTk3NzktZjFjMjZlMWFiODUyXkEyXkFqcGdeQXVyOTA1ODU0Mzc@._V1_FMjpg_UX1000_.jpg"/>
    <!-- Favicon -->
    <link rel="icon" href="https://m.media-amazon.com/images/M/MV5BMGNjMmFlYWUtMTBjNS00YzdlLTk3NzktZjFjMjZlMWFiODUyXkEyXkFqcGdeQXVyOTA1ODU0Mzc@._V1_FMjpg_UX1000_.jpg"/>
    <!-- Font Awesome icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"/>
    <!-- Core theme CSS -->
    <link rel="stylesheet" href="style.css"/>
    <style>
        .discord-icon {
            position: fixed;
            top: 10px;
            right: 10px;
            width: 32px;
            height: 32px;
            cursor: pointer;
        }

        /* Style for the profile picture */
        #profilePicture {
            width: 40px;
            height: 40px;
            padding: 5px;
            cursor: pointer;
            position: fixed;
            top: 10px;
            right: 10px;
        }
    </style>
</head>
<body class="dark-mode">
    <!-- Discord login button -->
    <button id="discordLoginButton">Login with Discord</button>

    <!-- Profile picture element -->
    <img id="profilePicture" alt="Profile Picture"/>

    <!-- Parallax Pixel Background Animation -->
    <section class="animated-background">
        <div id="stars1"></div>
        <div id="stars2"></div>
        <div id="stars3"></div>
    </section>
    <!-- End of Parallax Pixel Background Animation -->

    <!-- Your JavaScript code -->
    <script>
        // Get a reference to the login button
        const discordLoginButton = document.getElementById('discordLoginButton');

        // Add a click event listener
        discordLoginButton.addEventListener('click', () => {
            // Redirect the user to the Discord login page
            window.location.href = 'https://discord.com/oauth2/authorize?client_id=YOUR_CLIENT_ID&redirect_uri=https%3A%2F%2Fpsyduckanime.lol&response_type=code&scope=identify%20guilds.join';
        });

        // Function to get the value of a query parameter from the URL
        function getQueryParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Check if there's an authorization code in the URL
        const authCode = getQueryParam('code');

        if (authCode) {
            // Send the authorization code to your server to exchange it for an access token
            // You'll need to implement this part in your server-side code (server.js)

            // Once you have the access token and user data, you can set the profile picture
            fetch('/getProfileData') // Replace with the appropriate server endpoint to fetch user data
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(userData => {
                    // Construct the URL for the profile picture
                    const profilePictureUrl = `https://cdn.discordapp.com/avatars/${userData.id}/${userData.avatar}.png`;

                    // Display the profile picture in the top right corner
                    const profilePictureElement = document.getElementById('profilePicture');
                    profilePictureElement.src = profilePictureUrl;
                })
                .catch(error => {
                    console.error('Error fetching user data:', error);
                });
        }
    </script>
</body>
</html>
