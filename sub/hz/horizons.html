<!DOCTYPE html>
<html>
<head>
    <title>PsyduckAnime - best place to watch pokemon subbed and dubbed</title>
    <meta content="Psyduckanime - testing page" property="og:title"/>
    <meta content="https://m.media-amazon.com/images/M/MV5BMGNjMmFlYWUtMTBjNS00YzdlLTk3NzktZjFjMjZlMWFiODUyXkEyXkFqcGdeQXVyOTA1ODU0Mzc@._V1_FMjpg_UX1000_.jpg" property="og:image"/>
    <!-- Favicon -->
    <link href="https://m.media-amazon.com/images/M/MV5BMGNjMmFlYWUtMTBjNS00YzdlLTk3NzktZjFjMjZlMWFiODUyXkEyXkFqcGdeQXVyOTA1ODU0Mzc@._V1_FMjpg_UX1000_.jpg" rel="icon"/>
    <script src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js" type="text/javascript"></script>
    <style>
        body {
            padding: 25px;
            background-color: white;
            color: #424242;
            font-size: 25px;
        }
        .dark-mode {
            background-color: #424242;
            color: white;
        }
        .light-mode {
            background-color: white;
            color: #424242;
        }
    </style>
</head>
<body class="dark-mode"><div class="top-bar"><a href="https://snowythevulpix.github.io/redirect" title="Go to Home"><img alt="Logo" class_="logo" src="https://psyduckanime.lol/Psyduck.png" style="width: 40px; height: 40px; padding: 5px; cursor: pointer;"/></a>PsyduckAnime - watch pokemon subbed and dubbed for free</div>
</head>
<body>
    <div id="episode-container"></div>
    <script>
        document.addEventListener("DOMContentLoaded", async function () {
            const episodeContainer = document.getElementById("episode-container");

            // Function to fetch episode data and play using Clappr player
            async function loadAndPlayEpisode(episodeId) {
                try {
                    // Fetch episode data for the given episode ID
                    const response = await fetch(`https://psyduckanime.xyz/anime/gogoanime/watch/pokemon-shinsaku-anime-episode-${episodeId}`);
                    if (!response.ok) {
                        console.log(`Failed to fetch episode data for episode ${episodeId}`);
                        return;
                    }
                    const data = await response.json();
                    const title = data.title;

                    // Find the 1080p video URL from the episode data
                    const video1080p = data.sources.find(source => source.quality === "1080p");

                    if (video1080p) {
                        // Create a container for the episode
                        const episodeElement = document.createElement("div");
                        episodeElement.id = `episode-${episodeId}`;

                        // Create a header with the episode title
                        const episodeHeader = document.createElement("h2");
                        episodeHeader.textContent = `Episode ${episodeId} - ${title}`;
                        episodeElement.appendChild(episodeHeader);

                        // Append the episode container to the main container
                        episodeContainer.appendChild(episodeElement);

                        // Initialize Clappr player for the episode
                        const player = new Clappr.Player({
                            source: video1080p.url,
                            parentId: `#episode-${episodeId}`,
                        });
                    } else {
                        console.log(`1080p video for episode ${episodeId} not available.`);
                    }
                } catch (error) {
                    console.log(`Error loading episode ${episodeId}: ${error.message}`);
                }
            }

            // Determine the total number of episodes dynamically
            const response = await fetch('https://psyduckanime.xyz/anime/gogoanime/info/pokemon-shinsaku-anime');
            if (response.ok) {
                const data = await response.json();
                const totalEpisodes = data.totalEpisodes;

                // Check if a specific episode is specified in the URL's fragment identifier
                const fragmentIdentifier = window.location.hash;
                if (fragmentIdentifier) {
                    const episodeId = parseInt(fragmentIdentifier.substring(1)); // Remove the '#' and convert to integer
                    if (!isNaN(episodeId) && episodeId >= 1 && episodeId <= totalEpisodes) {
                        loadAndPlayEpisode(episodeId);
                        return; // Stop execution, as we've loaded the specified episode
                    }
                }

                // Load and play data for each episode in ascending order with a delay
                for (let episodeId = 1; episodeId <= totalEpisodes; episodeId++) {
                    setTimeout(() => loadAndPlayEpisode(episodeId), episodeId * 1000); // Delay in milliseconds
                }
            } else {
                episodeContainer.innerHTML = '<p>Failed to fetch total episodes data.</p>';
            }
        });
    </script>
    </script>
    <button onclick="darkMode()">Dark Mode</button>
    <button onclick="lightMode()">Light Mode</button>
    <button onclick="redirectToDownload()">Click here to download</button>
    <script>
            function redirectToDownload() {
                fetch('https://c.delusionz.xyz/anime/gogoanime/watch/' + episodeId)
                    .then(response => response.json())
                    .then(data => {
                        var downloadUrl = data.download;
                        window.location.href = downloadUrl;
                    })
                    .catch(error => {
                        console.error('Error:', error);
                    });
            }
        </script>
    <script>
            function darkMode() {
                var element = document.body;
                var content = document.getElementById("DarkModetext");
                element.className = "dark-mode";
                content.innerText = "Dark Mode is ON";
            }
    
            function lightMode() {
                var element = document.body;
                var content = document.getElementById("DarkModetext");
                element.className = "light-mode";
                content.innerText = "Dark Mode is OFF";
            }
        </script>
    <script>
                function nextEpisode() {
                    // Get the current URL
                    const currentUrl = window.location.href;
    
                    // Extract the episode number from the current URL
                    const match = currentUrl.match(/\/ep(\d+)\.html/);
    
                    if (match) {
                        // Extract the episode number as an integer
                        const currentEpisodeNumber = parseInt(match[1]);
    
                        // Calculate the next episode number
                        const nextEpisodeNumber = currentEpisodeNumber + 1;
    
                        // Construct the URL for the next episode
                        const nextEpisodeUrl = `ep${nextEpisodeNumber}.html`;
    
                        // Redirect to the next episode if it exists
                        window.location.href = nextEpisodeUrl;
                    } else {
                        alert('Could not determine the current episode number.');
                    }
                }
            </script><button onclick="nextEpisode()">Next Episode</button></body>
</body>
</html>
